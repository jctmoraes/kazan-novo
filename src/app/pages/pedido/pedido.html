<ion-header>
  <ion-toolbar color="primary">
    <ion-title>
      PEDIDOS REALIZADOS
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-toolbar no-border-top>
    <ion-row>
      <ion-item>
        <ion-label>STATUS</ion-label>
        <ion-select popup (ionChange)="change()" [(ngModel)]="_filtro.status" cancelText="CANCELAR" okText="SELECIONAR">
          <ion-select-option value="0">TODOS OS STATUS</ion-select-option>
          <ion-select-option value="1">NÃO ENVIADO</ion-select-option>
          <ion-select-option value="2">ENVIADOS</ion-select-option>
          <ion-select-option value="10">NÃO LIBERADOS</ion-select-option>
          <ion-select-option value="11">LIBERADOS</ion-select-option>
          <ion-select-option value="12">EM PREPARAÇÃO</ion-select-option>
          <ion-select-option value="13">PREP. PARCIAL</ion-select-option>
          <ion-select-option value="14">PREPARADOS</ion-select-option>
          <ion-select-option value="15">FATURADOS</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-col col-12>
        <ion-label *ngIf="_qtdTotal > 0">{{ _qtdTotal }} ENCONTRADO(S)</ion-label>
        <ion-label *ngIf="_qtdTotal == 0">NENHUM PEDIDO ENCONTRADO</ion-label>
      </ion-col>
    </ion-row>
  </ion-toolbar>

  <ion-fab bottom right #fab>
    <button color="primary" (click)="abrirFiltro()" ion-fab><ion-icon name="options"></ion-icon></button>
  </ion-fab>

  <ion-grid class="tabela tbl-responsiva">
		<ion-row class="tbl-cabecalho">
			<ion-col>DATA</ion-col>
			<ion-col>CLIENTE</ion-col>
			<ion-col>VALOR</ion-col>
			<ion-col>STATUS</ion-col>
			<ion-col>FILIAL</ion-col>
      <ion-col>AÇÃO</ion-col>
    </ion-row>

		<ion-row class="tbl-linha" *ngFor="let cada of _lstPedidos">
			<ion-col>{{ utilProvider.formatarDataHora(cada.data) }}</ion-col>
			<!-- <ion-col>{{ cada.cliente.nome == '' ? cada.cliProspec : cada.cliente.nome }}</ion-col> -->
      <ion-col>{{ cada.cliente.nome }}</ion-col>
			<ion-col>{{ utilProvider.formatarMoeda(cada.valor) }}</ion-col>
			<ion-col>{{ obterStatus(cada.status) }}</ion-col>
      <ion-col>{{ cada.nomeFilial }}</ion-col>
			<ion-col col-12>
        <ion-item>
          <button *ngIf="cada.status != 1" (click)="abrirDetalhe(cada)" color="secondary" ion-button icon-left outline item-start>
            <ion-icon name="information-circle"></ion-icon>
            DETALHES
          </button>
          <button *ngIf="cada.status == 1" (click)="excluir(cada)" color="secondary" ion-button icon-left outline item-start>
            <ion-icon name="trash"></ion-icon>
            EXCLUIR
          </button>
          <button *ngIf="cada.status == 1" (click)="editar(cada)" color="secondary" ion-button icon-left item-end>
            <ion-icon name="create"></ion-icon>
            EDITAR
          </button>
          <!-- <button *ngIf="cada.status == 2" (click)="copiar(cada)" color="secondary" ion-button icon-left item-end>
            <ion-icon name="create"></ion-icon>
            COPIAR
          </button> -->
          <button (click)="enviarPlanilha(cada)" color="sheet" ion-button icon-left item-end>
            <ion-icon name="send"></ion-icon>
            PLANILHA
          </button>
          <button (click)="enviarPdf(cada)" color="primary" ion-button icon-left item-end>
            <ion-icon name="send"></ion-icon>
            ENVIAR PDF
          </button>
        </ion-item>
        <ion-item block>
          <ion-row>
            <button (click)="imprimir(cada)" color="secondary" col-5 small ion-button  icon-left>
              <ion-icon name="print"></ion-icon>
              IMPRIMIR
            </button>
            <button (click)="enviar(cada)" color="primary" col-6 small ion-button  icon-left esp>
              <ion-icon name="cloud-upload"></ion-icon>
              SINCRONIZAR
            </button>
          </ion-row>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-12 style="text-align: center">
        <ion-spinner name="ios" *ngIf="_carregando"></ion-spinner>
      </ion-col>
    </ion-row>
  </ion-grid>

  <p class="text-mutted text-center">Arraste para baixo para atualizar.</p>

  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>

</ion-content>
